View(price_weeks)
format(as.p('2014-04-27'),'%w')
format(as.p('2014-04-16'),'%w')
xts_price <- align.time(xts(DT[,c('price','value')],DT$time),60)
xts_value <- align.time(xts(DT$value,DT$time),60)
bits <- to.minutes(xts_price)
head(btis)
head(bites)
head(bits)
str(head(bits))
bits_value <- period.apply(xts_value,endpoints(xts_value,'mins'),sum)
str(bits)
str(bits_value)
bits1 <- cbind(bits,bits_value)
head(bits1)
head(bits_value)
names(bits)
bits <- cbind(bits,bits_value)
names(bits) <- c('price.Open','price.High','price.Low','price.Close','Volumn')
head(bits)
index(bits)[1]
align.time(index(bits)[1],3600)
align.time(index(bits)[1],3600) - 3600
index(bits)[1] <- align.time(index(bits)[1],3600) - 3600
head(bits)
str(bits)
DT.xts <- to.minutes(xts_price)
DT.xts <- cbind(DT.xts,bits_value)
names(DT.xts) <- c('price.Open','price.High','price.Low','price.Close','Volumn')
index(DT.xts)[1] <- align.time(index(DT.xts)[1],3600) - 3600
get_period <- function(DT.xts,num_mins){
DT.xts <- to.minuts(x,k = num_mins)
return(DT.xts)
}
DT.xts.15m <- get_period(DT.xts,15)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.minutes(x,k = num_mins)
return(DT.xts)
}
DT.xts.15m <- get_period(DT.xts,15)
?to.minuts
?to.minutes
a <- to.daily(DT.xts)
View(a)
xts_price <- align.time(xts(DT[,c('price','value')],DT$time),60)
xts_value <- align.time(xts(DT$value,DT$time),60)
DT.xts <- to.minutes(xts_price)
View(DT)
View(xts_price)
xts_price <- align.time(xts(DT$price,DT$time),60)
DT.xts <- to.minutes(xts_price)
View(DT.xts)
index(DT.xts)[1] <- align.time(index(DT.xts)[1],3600) - 3600
get_period <- function(DT.xts,num_mins){
DT.xts <- to.minutes(x,k = num_mins)
return(DT.xts)
}
DT.xts.15m <- get_period(DT.xts,15)
a <- to.minutes10(DT.xts)
View(a)
DT <- smp_df(DT1,1e5)
DT.xts <- align.time(xts(DT[,c('price','value')],DT$time))
a <- to.minutes(DT.xts)
View(a)
names(DT) <- c('time','price','volumn')
DT.xts <- align.time(xts(DT[,c('price','value')],DT$time))
DT.xts <- align.time(xts(DT[,c('price','volumn')],DT$time))
a <- to.minutes(DT.xts)
View(a)
DT.xts <- xts(DT[,2:3],DT$time)
a <- to.minutes(DT.xts)
x <- read.csv(header=TRUE, stringsAsFactor=FALSE,
text="time,price,volume,
7/18/10 0:09,0.04951,20,
7/18/10 4:43,0.05941,50.01,
7/18/10 18:48,0.0808,5,
7/18/10 22:44,0.08585,10,
7/18/10 23:00,0.08584,5,
7/18/10 23:00,0.08584,5,
7/19/10 4:53,0.0909,5,
7/19/10 17:24,0.09307,80,
7/19/10 18:03,0.08911,100,
7/19/10 18:07,0.08752,100,")
myxts <- xts(x[, 2:3], order.by=as.POSIXct(x[, 1], format='%m/%d/%y %H:%M'))
to.minutes(myxts)
x <- read.csv(header=TRUE, stringsAsFactor=FALSE,
text="time,price,volume,
7/18/10 0:09,0.04951,20,
7/18/10 4:43,0.05941,50.01,
7/18/10 18:48,0.0808,5,
7/18/10 22:44,0.08585,10,
7/18/10 23:00,0.08584,5,
7/18/10 23:00,0.08584,5,
7/19/10 4:53,0.0909,5,
7/19/10 17:24,0.09307,80,
7/19/10 18:03,0.08911,100,
7/19/10 18:07,0.08752,100,")
View(x)
x <- read.csv(header=TRUE, stringsAsFactor=FALSE,
text="time,price,volume,
7/18/10 0:09,0.04951,20,
7/18/10 4:43,0.05941,50.01,
7/18/10 18:48,0.0808,5,
7/18/10 22:44,0.08585,10,
7/18/10 23:00,0.08584,5,
7/18/10 23:00,0.08584,5,
7/19/10 4:53,0.0909,5,
7/19/10 17:24,0.09307,80,
7/19/10 18:03,0.08911,100,
7/19/10 18:07,0.08752,100")
View(x)
x <- read.csv(header=TRUE, stringsAsFactor=FALSE,
text="time,price,volume,
7/18/10 0:09,0.04951,20,
7/18/10 4:43,0.05941,50.01,
7/18/10 18:48,0.0808,5,
7/18/10 22:44,0.08585,10,
7/18/10 23:00,0.08584,5,
7/18/10 23:00,0.08584,5,
7/19/10 4:53,0.0909,5,
7/19/10 17:24,0.09307,80,
7/19/10 18:03,0.08911,100,
7/19/10 18:07,0.08752,100,")
class(x)
x
head(DT)
x <- read.csv(header=TRUE, stringsAsFactor=FALSE,
text="time,price,volu33me,
7/18/10 0:09,0.04951,20,
7/18/10 4:43,0.05941,50.01,
7/18/10 18:48,0.0808,5,
7/18/10 22:44,0.08585,10,
7/18/10 23:00,0.08584,5,
7/18/10 23:00,0.08584,5,
7/19/10 4:53,0.0909,5,
7/19/10 17:24,0.09307,80,
7/19/10 18:03,0.08911,100,
7/19/10 18:07,0.08752,100,")
myxts <- xts(x[, 2:3], order.by=as.POSIXct(x[, 1], format='%m/%d/%y %H:%M'))
to.minutes(myxts)
x <- read.csv(header=TRUE, stringsAsFactor=FALSE,
text="time,price,volume,
7/18/10 0:09,0.04951,20,
7/18/10 4:43,0.05941,50.01,
7/18/10 18:48,0.0808,5,
7/18/10 22:44,0.08585,10,
7/18/10 23:00,0.08584,5,
7/18/10 23:00,0.08584,5,
7/19/10 4:53,0.0909,5,
7/19/10 17:24,0.09307,80,
7/19/10 18:03,0.08911,100,
7/19/10 18:07,0.08752,100,")
myxts <- xts(x[, 2:3], order.by=as.POSIXct(x[, 1], format='%m/%d/%y %H:%M'))
to.minutes(myxts)
names(DT) <- c('time','price','volume')
DT.xts <- xts(DT[,2:3],DT$time)
a <- to.minutes(DT.xts)
View(a)
DT <- smp_df(DT1,1e5)
names(DT) <- c('time','price','volume')
DT <- xts(DT[,c('price','volume')],DT$time)
DT <- to.minutes(DT)
View(DT)
DT <- smp_df(DT1,1e5)
names(DT) <- c('time','price','volume')
DT <- align.time(xts(DT[,c('price','volume')],DT$time),60)
DT <- to.minutes(DT)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.minutes(x,k = num_mins)
return(DT.xts)
}
DT.xts.15m <- get_period(DT.xts,15)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.minutes(DT.xts,k = num_mins)
return(DT.xts)
}
DT.15m <- get_period(DT.xts,15)
View(DT.15m)
DT.15m <- get_period(DT,15)
View(DT.15m)
?to.period
View(DT)
DT <- smp_df(DT1,20)
names(DT) <- c('time','price','volume')
DT <- align.time(xts(DT[,c('price','volume')],DT$time),60)
DT <- to.minutes(DT)
index(DT.xts)[1] <- align.time(index(DT.xts)[1],3600) - 3600
DT.15m <- get_period(DT,15)
View(DT)
DT <- DT1[,(nrow(DT1)-20):nrow(DT1)]
(nrow(DT1)-20)
nrow(DT1)
DT <- DT1[(nrow(DT1)-20):nrow(DT1),]
names(DT) <- c('time','price','volume')
DT <- align.time(xts(DT[,c('price','volume')],DT$time),60)
DT <- to.minutes(DT)
DT.15m <- get_period(DT,15)
(nrow(DT1)-20):nrow(DT1)
DT <- DT1[(nrow(DT1)-20):nrow(DT1),]
DT1 <- DT
DT <- DT1[(nrow(DT1)-100):nrow(DT1),]
names(DT) <- c('time','price','volume')
DT <- align.time(xts(DT[,c('price','volume')],DT$time),60)
DT <- to.minutes(DT)
DT.15m <- get_period(DT,15)
DT <- DT1[(nrow(DT1)-1000):nrow(DT1),]
names(DT) <- c('time','price','volume')
DT <- align.time(xts(DT[,c('price','volume')],DT$time),60)
DT <- to.minutes(DT)
DT.15m <- get_period(DT,15)
DT <- DT1[(nrow(DT1)-1000):nrow(DT1),]
DT <- DT1[(nrow(DT1)-1000):nrow(DT1),]
load(file.path(dir_data,'bitstampUSD.Rda'))
DT1 <- DT
DT <- DT1[(nrow(DT1)-1000):nrow(DT1),]
names(DT) <- c('time','price','volume')
DT <- align.time(xts(DT[,c('price','volume')],DT$time),60)
DT <- to.minutes(DT)
DT.15m <- get_period(DT,15)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.period(DT.xts,k = num_mins,indexAt = 'startof')
return(DT.xts)
}
DT.15m <- get_period(DT,15)
View(DT.15m)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.period(DT.xts,k = num_mins,indexAt = 'startof')
return(DT.xts)
}
DT.15m <- get_period(DT,15)
DT.xts <- to.period(DT.xts,k = num_mins,indexAt = 'firstof')
get_period <- function(DT.xts,num_mins){
DT.xts <- to.period(DT.xts,k = num_mins,indexAt = 'firstof')
return(DT.xts)
}
DT.15m <- get_period(DT,15)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.period(DT.xts,k = num_mins,indexAt = 'lastof')
return(DT.xts)
}
DT.15m <- get_period(DT,15)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.period(DT.xts,k = num_mins,indexAt = 'endof')
return(DT.xts)
}
DT.15m <- get_period(DT,15)
View(DT.15m)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.period(DT.xts,k = num_mins)
return(DT.xts)
}
DT.15m <- get_period(DT,15)
View(DT.15m)
View(DT)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'endof')
return(DT.xts)
}
DT.15m <- get_period(DT,15)
View(DT.15m)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'startof')
return(DT.xts)
}
DT.15m <- get_period(DT,15)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'endof')
return(DT.xts)
}
DT.15m <- get_period(DT,15)
get_period <- function(DT.xts,num_mins){
DT.xts <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'lastof')
return(DT.xts)
}
DT.15m <- get_period(DT,15)
DT.xts <- DT
num_mins <- 15
DT.xts <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'firstof')
DT.last <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'lastof')
DT.start <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'startof')
DT.end <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'endof')
View(DT.start)
View(DT.xts)
View(DT.last)
View(DT.end)
DT.xts <- DT
DT.first <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'firstof')
DT.last <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'lastof')
DT.start <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'startof')
DT.end <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'endof')
View(DT.first)
View(DT.end)
View(DT.start)
View(DT.last)
format(as.p('2016-09-30'),'%W')
format(as.p('2016-09-30'),'%w')
lastof(DT)
lastof(index(DT))
DT
index(DT)
?lastof
DT.first <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'firstof')
DT.last <- to.period(DT.xts,period = 'minutes',k = num_mins,indexAt = 'lastof')
get_period <- function(DT.xts,prd,k){
DT.xts <- to.period(DT.xts,period = prd,k = k,indexAt = 'startof')
return(DT.xts)
}
get_period <- function(DT.xts,prd,k){
DT.xts <- to.period(DT.xts,period = prd,k = k,indexAt = 'startof')
return(DT.xts)
}
DT.15m <- get_period(DT,'minutes',15)
DT.1h <- get_period(DT,'hours',1)
DT.4h <- get_period(DT,'hours',4)
DT.1d <- get_period(DT,'days',1)
DT.1w <- get_period(DT,'weeks',1)
View(DT.15m)
View(DT.1d)
View(DT.1h)
View(DT.1w)
View(DT.4h)
DT <- DT1[(nrow(DT1)-100000):nrow(DT1),]
names(DT) <- c('time','price','volume')
DT <- align.time(xts(DT[,c('price','volume')],DT$time),60)
DT <- to.minutes(DT)
DT.15m <- get_period(DT,'minutes',15)
DT.1h <- get_period(DT,'hours',1)
DT.4h <- get_period(DT,'hours',4)
DT.1d <- get_period(DT,'days',1)
DT.1w <- get_period(DT,'weeks',1)
a <- DT.15m
index(a) <- align.time(a,15*60)
index(a) <- align.time(index(a),15*60)
View(a)
get_period <- function(DT.xts,prd,k){
DT.xts <- to.period(DT.xts,period = prd,k = k,indexAt = 'endof')
return(DT.xts)
}
DT.15m <- get_period(DT,'minutes',15)
DT.1h <- get_period(DT,'hours',1)
DT.4h <- get_period(DT,'hours',4)
DT.1d <- get_period(DT,'days',1)
DT.1w <- get_period(DT,'weeks',1)
index(a) <- align.time(index(a),15*60,)
a <- DT.15m
index(a) <- align.time(index(a),15*60,)
DT.15m <- get_period(DT,'minutes',15);index(DT.15m) <- align.time(index(DT.15m,15*60))
DT.1h <- get_period(DT,'hours',1);index(DT.1h) <- align.time(index(DT.1h,60*60))
DT.4h <- get_period(DT,'hours',4);index(DT.4h) <- align.time(index(DT.4h,4*60*60))
DT.1d <- get_period(DT,'days',1);index(DT.1d) <- align.time(index(DT.1d,24*60*60))
DT.1w <- get_period(DT,'weeks',1);index(DT.1w) <- align.time(index(DT.1w,7*24*60*60))
?align.time
DT.15m <- get_period(DT,'minutes',15);
index(DT.15m) <- align.time(index(DT.15m,15*60))
a <- index(DT.15m)[1:10]
DT.15m <- get_period(DT,'minutes',15)
a <- index(DT.15m)[1:10]
a
align.time(a)
DT.15m <- get_period(DT,'minutes',15);index(DT.15m) <- align.time(index(DT.15m),15*60)
DT.1h <- get_period(DT,'hours',1);index(DT.1h) <- align.time(index(DT.1h),60*60)
DT.4h <- get_period(DT,'hours',4);index(DT.4h) <- align.time(index(DT.4h),4*60*60)
DT.1d <- get_period(DT,'days',1);index(DT.1d) <- align.time(index(DT.1d),24*60*60)
DT.1w <- get_period(DT,'weeks',1);index(DT.1w) <- align.time(index(DT.1w),7*24*60*60)
View(DT.15m)
time_base <- data.frame(prd = c('minutes','hours','days','weeks'),base = c(60,60*60,60*60*24,60*60*24*7))
time_base <- data.frame(prd = c('minutes','hours','days','weeks'),
base = c(60,60*60,60*60*24,60*60*24*7))
get_period <- function(DT.xts,prd,k){
DT.xts <- to.period(DT.xts,period = prd,k = k,indexAt = 'endof')
index(DT.xts) <- align.time(index(DT.xts),time_base$base[time_base$prd == prd])
return(DT.xts)
}
DT.15m <- get_period(DT,'minutes',15)
DT.1h <- get_period(DT,'hours',1)
DT.4h <- get_period(DT,'hours',4)
DT.1d <- get_period(DT,'days',1)
DT.1w <- get_period(DT,'weeks',1)
View(DT.15m)
View(DT.1h)
get_period <- function(DT.xts,prd,k){
DT.xts <- to.period(DT.xts,period = prd,k = k,indexAt = 'endof')
index(DT.xts) <- align.time(index(DT.xts),time_base$base[time_base$prd == prd])
return(DT.xts)
}
DT.15m <- get_period(DT,'minutes',15)
View(DT.15m)
DT <- DT.xts
get_period <- function(DT.xts,prd,k){
DT.xts <- to.period(DT.xts,period = prd,k = k,indexAt = 'endof')
index(DT.xts) <- align.time(index(DT.xts),time_base$base[time_base$prd == prd]*k)
return(DT.xts)
}
DT.15m <- get_period(DT,'minutes',15)
DT.1h <- get_period(DT,'hours',1)
DT.4h <- get_period(DT,'hours',4)
DT.1d <- get_period(DT,'days',1)
DT.1w <- get_period(DT,'weeks',1)
View(DT)
DT.15m <- get_period(DT,'minutes',15)
View(DT.15m)
get_period <- function(DT.xts,prd,k){
DT.xts <- to.period(DT.xts,period = prd,k = k,indexAt = 'endof')
cur_tbase <- time_base$base[time_base$prd == prd]*k
index(DT.xts) <- align.time(index(DT.xts),cur_tbase) - cur_tbase
return(DT.xts)
}
DT.15m <- get_period(DT,'minutes',15)
DT <- DT1[(nrow(DT1)-100000):nrow(DT1),]
names(DT) <- c('time','price','volume')
DT <- xts(DT[,c('price','volume')],DT$time)
DT <- to.minutes(DT)
time_base <- data.frame(prd = c('minutes','hours','days','weeks'),
base = c(60,60*60,60*60*24,60*60*24*7))
get_period <- function(DT.xts,prd,k){
DT.xts <- to.period(DT.xts,period = prd,k = k,indexAt = 'endof')
cur_tbase <- time_base$base[time_base$prd == prd]*k
index(DT.xts) <- align.time(index(DT.xts),cur_tbase) - cur_tbase
return(DT.xts)
}
DT.15m <- get_period(DT,'minutes',15)
DT.1h <- get_period(DT,'hours',1)
DT.4h <- get_period(DT,'hours',4)
DT.1d <- get_period(DT,'days',1)
DT.1w <- get_period(DT,'weeks',1)
View(DT.15m)
DT <- DT1
names(DT) <- c('time','price','volume')
DT <- xts(DT[,c('price','volume')],DT$time)
DT <- to.minutes(DT)
DT <- DT1
names(DT) <- c('time','price','volume')
DT <- xts(DT[,c('price','volume')],DT$time)
DT.15m <- get_period(DT,'minutes',15)
DT.1h <- get_period(DT,'hours',1)
DT.4h <- get_period(DT,'hours',4)
DT.1d <- get_period(DT,'days',1)
DT.1w <- get_period(DT,'weeks',1)
View(DT.1w)
format(as.p('2011-09-15'),'%W')
format(as.p('2011-09-15'),'%w')
DT.1m <- get_period(DT,'minutes',1)
DT.5m <- get_period(DT,'minutes',5)
View(DT.5m)
source('~/Code/R/COIN/base_func.R')
chartSeries(DT.1d)
chartSeries(DT.1d['201704'])
chartSeries(DT.1d['201703'/201704])
chartSeries(DT.1d['201703'/'201704'])
barchart(DT.1d['201703'])
barChart(DT.1d['201703'])
candleChart(DT.1d)
candleChart(DT.1d['201703'])
chartSeries(DT.1d['201703'])
candleChart(DT.1d['201703'])
chartSeries(DT.1d['201703'])
chartSeries(DT.1d['201703'],up.col='green',down.col='red')
chartSeries(DT.1d['201703'],up.col='green',down.col='red')
chartSeries(DT.1d['201703'],up.col='blue',down.col='red')
chartSeries(DT.1d['201703'],up.col='blue',down.col='red')
addMACD()
require(TTR)
chartSeries(DT.1d['201703'],up.col='blue',down.col='red')
addMACD()
?addMACD
chartSeries(DT.1d['201703'],up.col='blue',down.col='red')
addMACD()
a <- DT.1d['201703']
View(a)
barChart(DT.1h['201703'])
candleChart(DT.1d['201703'])
chartSeries(DT.1h['201703'],up.col='blue',down.col='red')
addMACD()
addBBands()
?addMACD
require(quantmod)
!require(quantmod)
chartSeries(DT.1h['201703'],up.col='blue',down.col='red',
TA = "addMACD();addBBands()")
chartSeries(DT.1h['201703'],up.col='blue',down.col='red',
TA = "addMACD();addBBands();addVo();addADX();addSMA(n=10)")
View(DT.1h)
ma_20 <- runMean(DT.1h[,4],n = 20)
View(ma_20)
save(DT,file = file.path(dir_data,'bitstamp.Rda'))
source('~/Code/R/COIN/bitstamp/load_bitstampUSD.R')
rm(list = ls());setwd('~/Code/R/COIN/bitstamp/');source('~/rhead')
load(file.path(dir_data,'bitstampUSD.Rda'))
require(Hmisc)
require(quantmod)
require(TTR)
DT1 <- DT
DT <- DT1
names(DT) <- c('time','price','volume')
DT <- xts(DT[,c('price','volume')],DT$time)
save(DT,file = file.path(dir_data,'bitstamp_xts.Rda'))
index(DT)[1]
DT.1m <- get_xts_period(DT,'minutes',1)
DT.5m <- get_xts_period(DT,'minutes',5)
DT.15m <- get_xts_period(DT,'minutes',15)
DT.1h <- get_xts_period(DT,'hours',1)
DT.4h <- get_xts_period(DT,'hours',4)
DT.1d <- get_xts_period(DT,'days',1)
DT.1w <- get_xts_period(DT,'weeks',1)
View(DT.1d)
lag(DT.1d[1])
lag(DT.1d[1],1)
lag(index(DT.1d)[1],1)
Lag(index(DT.1d)[1])
View(DT.1w)
View(DT.4h)
View(DT.1w)
